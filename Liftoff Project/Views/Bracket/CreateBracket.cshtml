@*@model List<Team>*@
@model Liftoff_Project.Controllers.BracketController


@if(ViewBag.User == null)
{
    <h2>Please Login or Register To Create Bracket</h2>

    <div>
        <p>Unfortunately you do not have access to this feature.</p>
    </div>
}
else
{
    
<h1>Create A Bracket!</h1>

<form id="myform" asp-controller="Bracket" asp-action="CreateBracket" method="post">
   
        <div class="dark">
    @for (int i = 0; i < 4; i++)
               {
    
        <div >
            

                <div class="round r-of-4">
                    <div class="bracket-game">
                        <div class="player top ">
                            <select id="team1" name="team1" required>
                                <option value="">*select a team*</option>
                                @foreach (var team in ViewBag.Teams)
                                {
                                    @if (team.Name_en != "--")
                                    {
                                        <option value="@team.Name_en">@team.Name_en</option>
                                    }
                                }
                            </select>

                            @* <div class="score">
                    3
                    </div>*@
                        </div>
                        <div class="player bot ">
                            <select id="team2" name="team2" required>
                                <option value="">*select a team*</option>
                                @foreach (var team in ViewBag.Teams)
                                {
                                    @if (team.Name_en != "--")
                                    {
                                        <option value="@team.Name_en">@team.Name_en</option>
                                    }
                                }
                            </select>
                            @* <div class="score">
                    1
                    </div>*@
                        </div>
                        @**@
                    </div>
                    <div class="bracket-game cont">
                        <div class="player top ">
                            <select id="team" name="team3" required>
                                <option value="">*select a team*</option>
                                @foreach (var team in ViewBag.Teams)
                                {
                                    @if (team.Name_en != "--")
                                    {
                                        <option value="@team.Name_en">@team.Name_en</option>
                                    }
                                }
                            </select>
                            @* <div class="score">
                    0
                    </div>*@
                        </div>
                        <div class="player bot ">
                            <select id="team" name="team4" required>
                                <option value="">*select a team*</option>
                                @foreach (var team in ViewBag.Teams)
                                {
                                    @if (team.Name_en != "--")
                                    {
                                        <option value="@team.Name_en">@team.Name_en</option>
                                    }
                                }
                            </select>
                            @*<div class="score">
                    3
                    </div>*@
                        </div>

                    </div>
                </div>
                
                
                <div class="connectors r-of-2">
                    <div class="top-line"></div>
                    <div class="clear"></div>
                    <div class="bottom-line"></div>
                    <div class="clear"></div>
                    <div class="vert-line"></div>
                    <div class="clear"></div>
                    <div class="next-line"></div>
                    <div class="clear"></div>
                </div>
                <div class="round r-of-2">
                    <div class="bracket-game">
                        <div class="player top ">
                            <select id="team" name="team5" required>
                                <option value="">*select a team*</option>
                                @foreach (var team in ViewBag.Teams)
                                {
                                    @if (team.Name_en != "--")
                                    {
                                        <option value="@team.Name_en">@team.Name_en</option>
                                    }
                                }
                            </select>
                            @* <div class="score">
                    2
                    </div>*@
                        </div>
                        <div class="player bot ">
                            <select id="team" name="team6" required>
                                <option value="">*select a team*</option>
                                @foreach (var team in ViewBag.Teams)
                                {
                                    @if (team.Name_en != "--")
                                    {
                                        <option value="@team.Name_en">@team.Name_en</option>
                                    }
                                }
                            </select>
                            @* <div class="score">
                    3
                    </div>*@
                        </div>
                    </div>
                </div>
                <div class="connectors r-of-2">
                    <div class="top-line"></div>
                    <div class="clear"></div>
                    <div class="bottom-line"></div>
                    <div class="clear"></div>
                    <div class="vert-line"></div>
                    <div class="clear"></div>
                    <div class="next-line"></div>
                    <div class="clear"></div>
                </div>
        </div> @*TEST DIV ENDS HERE!!!!!*@
            <div class="round semi-finals">
                <div class="bracket-game">
                    <div class="player top">
                        <select id="team" name="team7" required>
                            <option value="">*select a team*</option>
                            @foreach (var team in ViewBag.Teams)
                            {
                                @if (team.Name_en != "--")
                                {
                                    <option value="@team.Name_en">@team.Name_en</option>
                                }
                            }
                        </select>
                    </div>
                </div>
            </div>
            @if (i != 1 && i != 3)
            {
                <div class="round finals">
                    <div class="bracket-game">
                        <div class="player top">
                            <select id="team" name="team8" required>
                                <option value="">*select a team*</option>
                                @foreach (var team in ViewBag.Teams)
                                {
                                    @if (team.Name_en != "--")
                                    {
                                        <option value="@team.Name_en">@team.Name_en</option>
                                    }
                                }
                            </select>
                        </div>
                    </div>
                </div>
                @if (i == 2)
                {
                    <div class="round winner">
                        <div class="bracket-game">
                            <select id="team" name="team9" required>
                                <option value="">*select a team*</option>
                                @foreach (var team in ViewBag.Teams)
                                {
                                    @if (team.Name_en != "--")
                                    {
                                        <option value="@team.Name_en">@team.Name_en</option>
                                    }
                                }
                            </select>
                        </div>
                    </div>
                }

            }
            <div class="clear"></div>

        
        
        @*Winner dropmenu starts here*@
        }
    </div>
        <br />
        <div>
        <button id="mySubmit" class="btn btn-info" type="submit">Submit!</button>
            <a href="~/Home" class="btn btn-info" role="button">Go Back Home</a>
        </div>
    <script type="text/javascript" language="JavaScript" runat="server">

                let button = document.getElementById("mySubmit");
        console.log("Can you read this?")

        button.addEventListener("submit", function (event) {
            console.log("Event listener fired");
            let team1 = document.getElementById("team1");
            let team2 = document.getElementsById("team2");
            let frm = document.forms["myform"];
            if (team1 === team2) {
                //erro message maybe
                console.log("conditional listener fired")
                event.preventDefault();
            }
        }
        
    </script>
</form>
}